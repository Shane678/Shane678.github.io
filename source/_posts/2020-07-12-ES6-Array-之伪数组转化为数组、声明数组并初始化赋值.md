---
title: ES6 Array 之伪数组转化为数组、声明数组并初始化赋值
tags:
  - JavaScript
  - ES6
  - Array
categories:
  - 前端
author: Shane
img: 'https://myimagebed-1302088591.cos.ap-nanjing.myqcloud.com/%E6%96%87%E7%AB%A0%E7%89%B9%E5%BE%81%E5%9B%BE/21.jpg'
toc: true
summary: ES6 中伪数组转化为数组、声明数组并初始化赋值
abbrlink: 5d61d34c
date: 2020-07-12 21:44:59
---

## 伪数组转化为数组

### ES5 中

```javascript
/* 用法示例 */
// 先用一个数组的方法，比如说 slice 方法，然后再用 call 方法传入伪数组，这样就能实现伪数组到数组的转换
var args = [].slice.call(arguments) // arguments 属于 collection。 这里只是演示在 ES5 中的做法，实际上，arguments 必须在函数体内部使用，此外，ES6 已经废弃了使用 arguments。
var imgs = [].slice.call(document.querySelectorAll('img')) // document.querySelectorAll('img') 表示选中当前 DOM 树上所有的 img 标签，document.querySelectorAll('img') 属于 NodeList
```

### ES6 中

```javascript
// ES6 中的数组对象上新增了一个 API 叫 from，用来转换伪数组为数组。
Array.prototype.from // Array 是数组对象，prototype 是数组的原型对象，from 是 API
```

```javascript
/* 用法示例 */
let args = Array.from(arguments)
let imgs = Array.from(document.querySelectorAll('img'))
```

`Array.from`完整的语法如下：

```javascript
Array.from(arrayLike, mapFn, thisArg) // arrayLike：伪数组，mapFn：遍历的函数（就是每次都要执行的），thisArg：this 对象（如果传入的函数中用到了 this，那么 this 的指向就是这个 thisArg）
```

`Array.from`除了把伪数组转换为数组，还能声明数组并初始化赋值，举例如下：

```javascript
// 声明一个长度为 5 的数组 array
let array = Array(5)
// 用 for 循环给数组的所有元素赋值为 1
for (let i = 0, len = array.length; i < len; i++) {
  array[i] = 1
}
console.log(array)

/* 结果：
(5) [1, 1, 1, 1, 1]
*/
```

下面我们用`Array.from`声明数组并对数组元素初始化赋值：

```javascript
let array = Array.from({ length: 5 }, function () { return 1 }) // 用 Array.from 遍历一个长度为 5 的伪数组，每次都返回 1，实现伪数组转换数组的同时，初始化赋值的效果
console.log(array)

/* 结果：
(5) [1, 1, 1, 1, 1]
*/
```

对比 for 循环，用`Array from`声明数组并初始化赋值，代码就简洁多啦。