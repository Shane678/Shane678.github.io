---
title: 声明变量的关键字 var 与 let 的区别
tags:
  - JavaScript
  - ES6
  - Scope
author: Shane
img: 'https://myimagebed-1302088591.cos.ap-nanjing.myqcloud.com/%E6%96%87%E7%AB%A0%E7%89%B9%E5%BE%81%E5%9B%BE/20.jpg'
toc: true
summary: JavaScript 中声明变量的关键字 var 与 let 的区别
categories:
  - 前端
abbrlink: 2ed88c32
date: 2020-07-12 20:32:51
---

## 对比

| 声明变量的关键字 | 块级作用域 | 通过 window 的属性访问 | 重复定义已声明的变量 | 进行变量提升 |
| ---------------- | ---------- | ---------------------- | -------------------- | ------------ |
| var              | 无         | 能                     | 能                   | 会           |
| let              | 有         | 不能                   | 不能                 | 不会         |

## 举例

### 1. 块级作用域：

```javascript
{
  var a1 = 1
  console.log(a1) // 1
} // 这边的这对花括号其实是多余的（Block is redundant（块是多余的）），这里只是为了对比说明 var 和 let 的区别
// 用 var 声明的变量 a1 没有块级作用域，在块外仍可以访问
console.log(a1) // 1

{
  let a2 = 1
  console.log(a2) // 1
}
// 用 let 声明的变量 a2 在块级作用域外无法访问
console.log(a2) // 报错：Uncaught ReferenceError: a2 is not defined
```

### 2. 通过 window 的属性访问

```javascript
var b = 3 // 用 var 定义全局变量b
let c = 4 // 用 let 定义全局变量c

console.log(b, c) // 3 4
// 用 var 定义的全局变量能通过 window 的属性去访问
// 用 let 定义的全局变量不能通过 window 的属性去访问（访问结果为 undefined）
console.log(window.b, window.c) // 3 undefined
```

### 3. 重复定义已声明的变量

```javascript
var b = 3 // 用 var 定义全局变量b
let c = 4 // 用 let 定义全局变量c

// 已经声明过的变量能用 var 重复声明
var b = 6
console.log(b) // 6
// 已经声明过的变量不能用 let 重复声明
let b = 6 // 报错：Uncaught SyntaxError: Identifier 'b' has already been declared
console.log(b) 
let c = 6 // 报错：Uncaught SyntaxError: Identifier 'c' has already been declared
console.log(c) 
```

### 4. 变量提升

```javascript
function test () {
  var a = 3
  if (a === 3) {
    var b = 4 // 此处会进行变量提升
    console.log('b = ' + b)
  }
  console.log(b) // 不会报错
}
// 上面函数 test() 中的变量 b 因为是用 var 定义的，浏览器 js 引擎会对其进行变量提升，最终会变成如下效果：
function test () {
  var a = 3
  var b // b 变量提升后，就跑到了这个位置
  if (a === 3) {
    b = 4 // b 变量原来的位置
    console.log('b = ' + b)
  }
  console.log(b)
}

// 而如果是 let，则不会进行变量提升
function test () {
  var a = 3
  if (a === 3) {
    let b = 4 // 变量 b 是 let 定义的，不会进行变量提升，所以作用域被限制在本块中
    console.log('b = ' + b)
  }
  console.log(b) // 报错：Uncaught ReferenceError: b is not defined
}
```

