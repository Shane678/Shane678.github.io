---
title: ES6 对象之 Map
tags:
  - JavaScript
  - ES6
  - Map
categories:
  - 前端
author: Shane
img: >-
  https://myimagebed-1302088591.cos.ap-nanjing.myqcloud.com/%E6%96%87%E7%AB%A0%E7%89%B9%E5%BE%81%E5%9B%BE/35.jpg
toc: true
summary: ES6 中的 Map 对象
abbrlink: daff8b99
date: 2020-07-19 21:57:45
---

# ES6 对象之 Map

```javascript
// 实例化一个 Map 对象
let map = new Map()
console.log(map) // Map(0) {}
```

```javascript
// 实例化 Map 对象，同时进行初始化赋值，赋值内容要求是可遍历的对象，并且该对象内的元素还得是形式为 [key，value] 的数组
// 错误写法：
let map = new Map([1, 2, 3]) // Uncaught TypeError: Iterator value 1 is not an entry object
// 正确写法：
let map = new Map([[1, 2], [3, 4]])
console.log(map) // Map(2) {1 => 2, 3 => 4}
// 表面上看 Map 的数据结构跟 Object 的 key-value 形式没有太大区别，
// 但事实上，Map 中的 key 可以是任意类型的值（注意和 Set 的区别，Set 是里面的每个元素可以为任意值）
```

```javascript
let map = new Map()
// 设置 Map 对象中键的值
map.set(1, 2)
map.set(3, 4)
// 上面的两行代码效果等同于 let map = new Map([[1, 2], [3, 4]])
console.log(map) // Map(2) {1 => 2, 3 => 4}
```

```javascript
let map = new Map()
// 设置 Map 对象中键的值
map.set(1, 2)
map.set(3, 4)
// 设置 Map 对象中键的值，这里重新设置了键为“1”的值，相当于实现了修改的功能
map.set(1, 3)
console.log(map) // Map(2) {1 => 3, 3 => 4}
```

```javascript
let map = new Map()
map.set(1, 2)
map.set(3, 4)
// 根据“key”删除对应的键值对
map.delete(1)
console.log(map) // Map(1) {3 => 4}
```

```javascript
let map = new Map()
map.set(1, 2)
map.set(3, 4)
// 清空全部数据
map.clear()
console.log(map) // Map(0) {}
```

```javascript
let map = new Map()
map.set(1, 2)
map.set(3, 4)
// 通过 size 属性获取 Map 中的数据数量
console.log(map.size) // 2
```

```javascript
let map = new Map()
map.set(1, 2)
map.set(3, 4)
// 通过 has() 方法，根据“key”值查找数据是否存在
console.log(map.has(1)) // true
console.log(map.has(2)) // false
```

```javascript
let map = new Map()
map.set(1, 2)
map.set(3, 4)
map.set(1, 3)
// 通过 get() 方法，根据“key”值获取对应的“value”值
console.log(map.get(1)) // 3
// 通过 keys() 方法，获取所有 key
console.log(map.keys()) // MapIterator {1, 3}
// 通过 values() 方法，获取所有 value
console.log(map.values()) // MapIterator {3, 4}
// 通过 entries() 方法，获取所有键值对
console.log(map.entries()) // MapIterator {1 => 3, 3 => 4}
```

```javascript
map.set(1, 'value-1')
map.set(3, 'value-3')
// 使用 forEach() 方法遍历 Map 对象（注意：第一个参数是“键值对”中的“值”，第二个参数是“键值对”中的“键”）
map.forEach((value, key) => {
  console.log(value, key)
})
/* 运行结果：
value-1 1
value-3 3
*/
```

```javascript
map.set(1, 'value-1')
map.set(3, 'value-3')
// 使用 for of 遍历 Map 对象
// 注意 1：Map 对象中的元素是形式为 [key，value] 的数组哦
// 注意 2：for of 的 of 后面跟的必须是可遍历的对象哦
for (const [key, value] of map) {
  console.log(key, value)
}
/* 运行结果：
1 "value-1"
3 "value-3"
*/
```

```javascript
// 注意：关于“键”的类型，Map 对象中“键”的类型是任意的
let o = function () {
  console.log('o')
}
map.set(o, 4)
console.log(map) // Map(3) {1 => "value-1", 3 => "value-3", ƒ => 4}
```

```javascript
// 注意：关于“键”的顺序，遍历的结果会按照“键”的原始插入顺序排序
map.set(10, 'value-10')
map.set(1, 'value-1')
map.set(3, 'value-3')
map.set(1, 'value-777')
console.log(map)
for (const [key, val] of map) {
  console.log(key, val)
}
map.forEach((val, key) => {
  console.log(val, key)
})
/* 运行结果：
Map(3) {1 => "value-777", 3 => "value-3", 10 => "value-10"}
10 "value-10"
1 "value-777"
3 "value-3"
value-10 10
value-777 1
value-3 3
*/
// 此外，Map 类型的性能较好，以后在存储数据时，可以考虑使用字典型的数据结构 Map 数据类型替代 Object
```